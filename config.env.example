# Environment Configuration Template
# Copy this file to .env and customize for your deployment

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL connection settings
DATABASE_URL=postgresql://postgres:postgres@db:5432/face_recognition
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres  # CHANGE THIS IN PRODUCTION!
POSTGRES_DB=face_recognition

# Database performance tuning
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_PRE_PING=true

# =============================================================================
# API Configuration
# =============================================================================

# API server settings
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1  # Increase for production (2 x CPU cores)

# API security
API_DEBUG=true  # Set to false in production
API_RELOAD=true  # Set to false in production

# CORS settings (change for production)
CORS_ORIGINS=*  # Replace with specific origins: ["https://yourdomain.com"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=*
CORS_ALLOW_HEADERS=*

# =============================================================================
# Face Recognition Configuration
# =============================================================================

# Detection model: "hog" (CPU, faster) or "cnn" (GPU, more accurate)
FACE_DETECTION_MODEL=hog

# Recognition threshold (0.0-2.0, lower = stricter)
RECOGNITION_THRESHOLD=0.45

# Confidence thresholds
CONFIDENCE_HIGH=0.35
CONFIDENCE_MEDIUM=0.45

# Image preprocessing
MAX_IMAGE_SIZE=1024  # Max dimension in pixels
REQUIRE_SINGLE_FACE=true

# =============================================================================
# Performance & Scalability
# =============================================================================

# Vector index configuration (adjust based on user count)
VECTOR_INDEX_LISTS=100  # sqrt(num_users), e.g., 100 for ~10k users

# Caching (future implementation)
ENABLE_CACHE=false
CACHE_TTL=3600  # Cache time-to-live in seconds
REDIS_URL=redis://redis:6379/0

# =============================================================================
# Logging & Monitoring
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# Enable access logs
ENABLE_ACCESS_LOG=true

# =============================================================================
# Security (Production)
# =============================================================================

# API authentication (future implementation)
ENABLE_AUTH=false
API_KEY_HEADER=X-API-Key
JWT_SECRET_KEY=your-secret-key-here  # Generate with: openssl rand -hex 32
JWT_ALGORITHM=HS256
JWT_EXPIRATION=3600

# Rate limiting (requests per minute)
RATE_LIMIT=100

# =============================================================================
# Feature Flags
# =============================================================================

# Enable/disable features
ENABLE_USER_MANAGEMENT=true
ENABLE_BATCH_PROCESSING=false
ENABLE_LIVENESS_DETECTION=false
ENABLE_VIDEO_STREAMING=false

# =============================================================================
# Model Configuration (Future Upgrades)
# =============================================================================

# Embedding model: "dlib" (current), "arcface", "insightface"
EMBEDDING_MODEL=dlib
EMBEDDING_DIMENSION=128  # 128 for dlib, 512 for ArcFace

# GPU acceleration
ENABLE_GPU=false
GPU_DEVICE_ID=0
ENABLE_ONNX=false
ENABLE_TENSORRT=false

# Model paths (for custom models)
MODEL_PATH=/models
DETECTION_MODEL_PATH=/models/detection
EMBEDDING_MODEL_PATH=/models/embedding

# =============================================================================
# Development & Testing
# =============================================================================

# Test mode
TEST_MODE=false

# Sample data
LOAD_SAMPLE_DATA=false
SAMPLE_DATA_PATH=/data/samples

# Profiling
ENABLE_PROFILING=false
PROFILE_OUTPUT_DIR=/tmp/profiles

